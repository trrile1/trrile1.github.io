<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Public Art</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' rel='stylesheet' />
    <style>
      body { margin: 0; padding: 0; }
      h2,
      h3 { margin: 10px; font-size: 1.2em; }
      h3 { font-size: 1em; }
      p { font-size: 0.85em; margin: 10px: text-align: left; }

      .map-overlay {
        position: absolute;
        bottom: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 20px;
        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }

      #map { position: absolute; top: 0; bottom: 0; width: 100%; }

      #features {
        top: 0;
        height: 100px;
        margin-top: 20px;
        width: 250px;
      }
      #legend {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 200px;
        margin-bottom: 40px;
        width: 150px;
      }
      .legend-key {
        display: inline-block;
        background-repeat: no-repeat;
        border-radius: 20%;
        width: 15px;
        height: 15px;
        margin-right: 10px;
      }

    </style>
  </head>
  <body>
  <div id='map'></div>
  <div class='map-overlay' id='features'><h2>Public Art</h2><div id='pd'><p>Click on an art!</p></div></div>
  <div class='map-overlay' id='legend'></div>
  <script>
  mapboxgl.accessToken = 'pk.eyJ1IjoidHJyaWxlMSIsImEiOiJjanVlNGg5aXMwcDF0NDNyeXg4Y3Axc2t0In0.yioavWI-uixNmFWr2piy6Q'; // replace this with your access token
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/trrile1/cjx3dvboe0y7u1cs8s1axhn7l', // replace this with your style URL
    center: [-88.95, 40.5],
    zoom: 11
  });
  map.on('load', function() {
    var layers = ['Mural', 'Statue/Sculpture', 'Memorial'];
    var symbols = ["url('icons/attraction-15.svg')", "url('icons/circle-15.svg')", "url('icons/monument-15.svg')"];
    for (i = 0; i < layers.length; i++) {
      var layer = layers[i];
      var symbol = symbols[i];
      var item = document.createElement('div');
      var key = document.createElement('span');
      key.className = 'legend-key';
      key.style.backgroundImage = symbol;

      var value = document.createElement('span');
      value.innerHTML = layer;
      item.appendChild(key);
      item.appendChild(value);
      legend.appendChild(item);
    }
  });
  map.on('click', function(e) {
    var features = map.queryRenderedFeatures(e.point, {
      layers: ['Public Art'] // replace this with the name of the layer
    });

    if (!features.length) {
      return;
    }

    var feature = features[0];

    var popup = new mapboxgl.Popup({ offset: [0, -15] })
      .setLngLat(feature.geometry.coordinates)
      .setHTML('<h3>' + feature.properties.Public_Art + '</h3><p>' + feature.properties.Comments + '</p>')
      .setLngLat(feature.geometry.coordinates)
      .addTo(map);
  });
  </script>

  </body>
</html>
